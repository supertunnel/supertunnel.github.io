"use strict";function supportTransition(){var t=document.createElement("transitiontest"),i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var e in i)if(void 0!==t.style[e])return{type:i[e]};return!1}function Carousel(t){this.options=t||{},this.isCycle=null==this.options.isCycle||this.options.isCycle,this.startIndex=this.options.startIndex||0,this.duration=this.options.duration||600,this.interval=this.options.interval||3e3,this.direction=this.options.direction||"",this.activeIndex=this.startIndex,this.sliding=!1,this.container=this.options.el||document.getElementsByClassName("carousel-inner")[0],this.itemNode=this.container.getElementsByClassName("item"),this.itemLen=this.itemNode.length,this.timer=null,this.isTouch=!("vertical"==this.options.direction||!this.options.isTouch)&&this.options.isTouch,this.init&&this.init()}window.supportTransition=supportTransition(),Carousel.prototype.render=function(){this.container.className=this.container.className+" "+this.direction,this.itemNode[this.startIndex].className="item active",0<this.container.getElementsByClassName("btn-num").length&&(this.container.getElementsByClassName("btn-num")[this.startIndex].className="btn-num current");for(var t=0,i=this.container.getElementsByClassName("item").length;t<i;t++){var e=this.container.getElementsByClassName("item")[t],n=this.duration/1e3+"s";e.style.transitionDuration=n,e.style.webkitTransitionDuration=n,e.style.mozTransitionDuration=n,e.style.oTransitionDuration=n}},Carousel.prototype.getWillActiveIndex=function(t){var i,e;return 0==this.activeIndex?(i=this.itemLen-1,e=this.activeIndex+1):this.activeIndex==this.itemLen-1?(i=this.activeIndex-1,e=0):(i=this.activeIndex-1,e=this.activeIndex+1),"next"==t?e:i},Carousel.prototype.slide=function(t,i,e){if(1!=this.sliding){var n="next"==t?"left":"right",s=this.itemNode[this.activeIndex],a=i?i-1:this.getWillActiveIndex(t);if(this.activeIndex!=a){var o=this.itemNode[a];this.sliding=!0;var r=this;this.timer=clearInterval(r.timer);var c,l,h,u=r.container.getElementsByClassName("btn-num");if(0<u.length)for(var d=0,m=u.length;d<m;d++)u[d].className="btn-num",d==a&&(u[d].className="btn-num current");if(o.className="item "+t,o.offsetWidth,o.className="item "+t+" "+n,s.className="item active "+n,window.supportTransition){var p=!0;c=s,l=window.supportTransition.type,h=function(t){t.target==this&&p&&(p=!1,v())},window.addEventListener?c.addEventListener(l,h,!1):c.attachEvent(l,h)}else setTimeout(function(){v()},r.duration)}}function v(){o.className="item active",s.className="item",r.activeIndex=a,r.sliding=!1,r.isCycle&&r.cycle()}},Carousel.prototype.next=function(){this.slide("next")},Carousel.prototype.prev=function(){this.slide("prev")},Carousel.prototype.to=function(t){var i=this.activeIndex>t-1?"prev":"next";this.slide(i,t)},Carousel.prototype.cycle=function(){var t=this;t.timer&&clearInterval(t.timer),t.timer=setInterval(function(){t.slide("next")},t.interval)},Carousel.prototype.arrowInit=function(){var t=this,i=t.container.getElementsByClassName("btn-prev")[0],e=t.container.getElementsByClassName("btn-next")[0];i&&(i.onclick=function(){t.slide("prev")}),e&&(e.onclick=function(){t.slide("next")})},Carousel.prototype.cicleInit=function(){var t=this.container.getElementsByClassName("btn-num");if(!(t.length<1))for(var i=this,e=0,n=t.length;e<n;e++)t[e].onclick=function(){i.to(parseInt(this.getAttribute("data-slide-to"))+1)}},Carousel.prototype.touchSlide=function(){var e={x:0},n={x:0},i=this;this.container.addEventListener("touchstart",function(t){var i=t.targetTouches[0];e={x:parseInt(i.pageX),y:parseInt(i.pageY)}}),this.container.addEventListener("touchmove",function(t){var i=t.targetTouches[0];n={x:parseInt(i.pageX)-e.x,y:parseInt(i.pageY)-e.y},0===(Math.abs(n.x)<Math.abs(n.y)?1:0)&&t.preventDefault()}),this.container.addEventListener("touchend",function(t){Math.abs(n.x)<40||(0<n.x?i.slide("prev"):i.slide("next"))})},Carousel.prototype.init=function(){this.render(),this.arrowInit(),this.cicleInit(),this.isCycle&&this.cycle(),this.isTouch&&this.touchSlide()};